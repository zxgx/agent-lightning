
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://microsoft.github.io/agent-lightning/latest/reference/store/">
      
      
        <link rel="prev" href="../runner/">
      
      
        <link rel="next" href="../trainer/">
      
      
      <link rel="icon" href="../../assets/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Store - Agent-lightning</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="agl" data-md-color-accent="agl">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#store-references" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Agent-lightning" class="md-header__button md-logo" aria-label="Agent-lightning" data-md-component="logo">
      
  <img src="../../assets/favicon-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Agent-lightning
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Store
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="agl" data-md-color-accent="agl"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="agl" data-md-color-accent="agl"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/microsoft/agent-lightning" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    agent-lightning
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Agent-lightning" class="md-nav__button md-logo" aria-label="Agent-lightning" data-md-component="logo">
      
  <img src="../../assets/favicon-white.svg" alt="logo">

    </a>
    Agent-lightning
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/microsoft/agent-lightning" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    agent-lightning
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Quickstart
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/train-first-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Train the First Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/write-first-algorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Write the First Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    How-To Recipes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How-To Recipes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/unsloth-sft/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SFT with Unsloth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/train-sql-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Train SQL Agent with RL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Learning More
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Learning More
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/write-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Write Agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/debug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debugging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/traces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with Traces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/parallelize/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parallelize
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Algorithm Zoo
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Algorithm Zoo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm-zoo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm-zoo/apo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    APO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm-zoo/verl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VERL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Deep Dive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Deep Dive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deep-dive/birds-eye-view/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bird's Eye View
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deep-dive/store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding Store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deep-dive/serving-llm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serving LLM
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API References
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            API References
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command Line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../instrumentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instrumentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../runner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Store
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Store
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#agentlightning.LightningStore" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LightningStore
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LightningStore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.add_otel_span" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_otel_span
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.add_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.add_span" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_span
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.dequeue_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;dequeue_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.enqueue_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;enqueue_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.get_latest_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.get_latest_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.get_next_span_sequence_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_next_span_sequence_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.get_resources_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_resources_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.get_rollout_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_rollout_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.query_attempts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_attempts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.query_rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_rollouts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.query_spans" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_spans
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.start_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.start_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.update_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.update_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.update_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.wait_for_rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait_for_rollouts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#store-implementations" class="md-nav__link">
    <span class="md-ellipsis">
      Store Implementations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Store Implementations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;InMemoryLightningStore
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" InMemoryLightningStore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.add_otel_span" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_otel_span
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.add_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.add_span" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_span
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.dequeue_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;dequeue_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.enqueue_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;enqueue_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.get_latest_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.get_latest_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.get_next_span_sequence_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_next_span_sequence_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.get_resources_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_resources_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.get_rollout_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_rollout_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.query_attempts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_attempts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.query_rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_rollouts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.query_spans" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_spans
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.start_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.start_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.update_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.update_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.update_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.wait_for_rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait_for_rollouts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-server-and-thread-safe-wrappers" class="md-nav__link">
    <span class="md-ellipsis">
      Client-Server and Thread-safe Wrappers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client-Server and Thread-safe Wrappers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LightningStoreServer
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LightningStoreServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer.__getstate__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__getstate__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer.__setstate__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__setstate__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer.run_forever" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run_forever
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer.start" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer.stop" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LightningStoreClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LightningStoreClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.__getstate__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__getstate__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.__setstate__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__setstate__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.close" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.dequeue_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;dequeue_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.get_latest_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.get_latest_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.get_resources_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_resources_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.get_rollout_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_rollout_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.wait_for_rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait_for_rollouts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreThreaded" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LightningStoreThreaded
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../trainer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trainer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../internal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Internal
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#agentlightning.LightningStore" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LightningStore
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LightningStore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.add_otel_span" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_otel_span
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.add_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.add_span" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_span
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.dequeue_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;dequeue_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.enqueue_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;enqueue_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.get_latest_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.get_latest_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.get_next_span_sequence_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_next_span_sequence_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.get_resources_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_resources_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.get_rollout_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_rollout_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.query_attempts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_attempts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.query_rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_rollouts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.query_spans" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_spans
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.start_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.start_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.update_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.update_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.update_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStore.wait_for_rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait_for_rollouts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#store-implementations" class="md-nav__link">
    <span class="md-ellipsis">
      Store Implementations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Store Implementations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;InMemoryLightningStore
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" InMemoryLightningStore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.add_otel_span" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_otel_span
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.add_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.add_span" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_span
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.dequeue_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;dequeue_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.enqueue_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;enqueue_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.get_latest_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.get_latest_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.get_next_span_sequence_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_next_span_sequence_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.get_resources_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_resources_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.get_rollout_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_rollout_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.query_attempts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_attempts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.query_rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_rollouts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.query_spans" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;query_spans
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.start_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.start_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.update_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.update_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.update_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;update_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.InMemoryLightningStore.wait_for_rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait_for_rollouts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-server-and-thread-safe-wrappers" class="md-nav__link">
    <span class="md-ellipsis">
      Client-Server and Thread-safe Wrappers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client-Server and Thread-safe Wrappers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LightningStoreServer
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LightningStoreServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer.__getstate__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__getstate__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer.__setstate__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__setstate__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer.run_forever" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run_forever
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer.start" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreServer.stop" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LightningStoreClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" LightningStoreClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.__getstate__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__getstate__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.__setstate__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__setstate__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.close" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.dequeue_rollout" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;dequeue_rollout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.get_latest_attempt" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_attempt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.get_latest_resources" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_latest_resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.get_resources_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_resources_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.get_rollout_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_rollout_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreClient.wait_for_rollouts" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait_for_rollouts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentlightning.LightningStoreThreaded" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;LightningStoreThreaded
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  <div id="version-warning" class="version-warning" style="display: none;">
    ⚠️ You are viewing development documentation. For stable documentation, please visit
    <a href="https://microsoft.github.io/agent-lightning/stable/">https://microsoft.github.io/agent-lightning/stable/</a>
  </div>
  
                  <!-- Copied and modified from https://github.com/squidfunk/mkdocs-material/blob/master/src/templates/partials/content.html -->

<!-- Tags -->



<!-- Actions -->

  
  


<!--
  Hack: check whether the content contains a h1 headline. If it doesn't, the
  page title (or respectively site name) is used as the main headline.
-->


<!-- Source file information -->







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="October 15, 2025 05:37:44 UTC"><span class="timeago" datetime="2025-10-15T05:37:44+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="October 15, 2025 05:37:44 UTC">2025-10-15</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="October 15, 2025 05:37:44 UTC"><span class="timeago" datetime="2025-10-15T05:37:44+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="October 15, 2025 05:37:44 UTC">2025-10-15</span>
  </span>

    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:yuge.zhang@microsoft.com">Yuge Zhang</a>
    </nav>
  </span>

    
    
  </aside>


<!-- Page content -->
<h1 id="store-references">Store References<a class="headerlink" href="#store-references" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-class">



<h3 id="agentlightning.LightningStore" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>agentlightning.LightningStore</code>


<a href="#agentlightning.LightningStore" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents first">


        <p>Contract for the persistent control-plane that coordinates training rollouts.</p>
<p>A <code>LightningStore</code> mediates every interaction between algorithms and runners:</p>
<ul>
<li><strong>Rollout lifecycle:</strong> accept new rollouts, queue them for execution, create attempts,
  and drive the rollout status machine (<code>"queuing"</code> → <code>"preparing"</code> → <code>"running"</code> →
  <code>{"succeeded","failed","cancelled"}</code> or <code>"requeuing"</code> when a retry is justified).</li>
<li><strong>Attempt tracking:</strong> record each execution attempt, including progress heartbeats,
  retry sequencing, and terminal states such as <code>"timeout"</code> or <code>"unresponsive"</code>.</li>
<li><strong>Span ingest:</strong> capture structured telemetry emitted by runners (either as native
  <a class="autorefs autorefs-internal" title="            agentlightning.Span" href="../types/#agentlightning.Span"><code>Span</code></a> objects or as <code>opentelemetry.sdk.trace.ReadableSpan</code>
  instances) so that algorithms can reconstruct trajectories and rewards.</li>
<li><strong>Resource versioning:</strong> manage immutable snapshots of named resources
  (prompt templates, model checkpoints, proxy endpoints, …) and expose a single
  "latest" snapshot that runners can fetch just after claiming work.</li>
</ul>
<p>Implementations must provide thread-safe/async-safe semantics: each coroutine should
appear atomic to callers even when multiple algorithms or runners call the API concurrently.
Unless stated otherwise, missing identifiers should result in a <code>ValueError</code>.</p>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.add_otel_span" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_otel_span</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">,</span> <span class="n">attempt_id</span><span class="p">,</span> <span class="n">readable_span</span><span class="p">,</span> <span class="n">sequence_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.add_otel_span" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert and persist an OpenTelemetry span for a particular attempt.</p>
<p>Implementations must transform the <code>readable_span</code> into a <a class="autorefs autorefs-internal" title="            agentlightning.Span" href="../types/#agentlightning.Span"><code>Span</code></a>
(typically via <a class="autorefs autorefs-internal" title="            from_opentelemetry(src, rollout_id, attempt_id, sequence_id)

  
      classmethod
  " href="../types/#agentlightning.Span.from_opentelemetry"><code>Span.from_opentelemetry()</code></a>),
assign a strictly increasing <code>sequence_id</code> when one is not provided, and persist it
using the same semantics as <a class="autorefs autorefs-internal" title="            add_span(span)

  
      async
  " href="#agentlightning.LightningStore.add_span"><code>add_span()</code></a>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Identifier of the rollout that produced the span.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>attempt_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Attempt identifier the span belongs to.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>readable_span</code></b>
              (<code><span title="opentelemetry.sdk.trace.ReadableSpan">ReadableSpan</span></code>)
          –
          <div class="doc-md-description">
            <p>OpenTelemetry span in SDK form.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>sequence_id</code></b>
              (<code><span title="int">int</span> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Optional explicit ordering hint. When omitted, call
<a class="autorefs autorefs-internal" title="            get_next_span_sequence_id(rollout_id, attempt_id)

  
      async
  " href="#agentlightning.LightningStore.get_next_span_sequence_id"><code>get_next_span_sequence_id()</code></a>
automatically.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            agentlightning.Span (agentlightning.types.Span)" href="../types/#agentlightning.Span">Span</a></code>
          –
          <div class="doc-md-description">
            <p>The stored span record.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement span persistence.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when the rollout or attempt is unknown.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.add_resources" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_resources</span><span class="p">(</span><span class="n">resources</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.add_resources" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Persist a new immutable snapshot of named resources and mark it as latest.</p>
<p>Implementations must assign a fresh <code>resources_id</code> and ensure subsequent calls to
<a class="autorefs autorefs-internal" title="            get_latest_resources()

  
      async
  " href="#agentlightning.LightningStore.get_latest_resources"><code>get_latest_resources()</code></a> return the
snapshot produced here.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>resources</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.NamedResources = Dict[str, ResourceUnion]

  
      module-attribute
   (agentlightning.types.NamedResources)" href="../types/#agentlightning.NamedResources">NamedResources</a></code>)
          –
          <div class="doc-md-description">
            <p>Mapping of resource names to their serialized payloads.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate (agentlightning.types.ResourcesUpdate)" href="../types/#agentlightning.ResourcesUpdate">ResourcesUpdate</a></code>
          –
          <div class="doc-md-description">
            <p>The stored <a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate" href="../types/#agentlightning.ResourcesUpdate"><code>ResourcesUpdate</code></a> including its generated id.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement resource persistence.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.add_span" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_span</span><span class="p">(</span><span class="n">span</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.add_span" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Persist a pre-constructed span emitted during rollout execution.</p>
<p>The provided <a class="autorefs autorefs-internal" title="            agentlightning.Span" href="../types/#agentlightning.Span"><code>Span</code></a> must already contain the <code>rollout_id</code>,
<code>attempt_id</code>, and <code>sequence_id</code>. Implementations must:</p>
<ul>
<li>Verify that both rollout and attempt exist.</li>
<li>Ensure span ordering remains strictly increasing per attempt (rejecting or keeping duplicates).</li>
<li>Treat the span arrival as a heartbeat: update the attempt's <code>last_heartbeat_time</code>
  and transition both attempt and rollout to <code>"running"</code> if they were still
  <code>"preparing"</code> or <code>"requeuing"</code>.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>span</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.Span (agentlightning.types.Span)" href="../types/#agentlightning.Span">Span</a></code>)
          –
          <div class="doc-md-description">
            <p>Fully populated span to persist.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            agentlightning.Span (agentlightning.types.Span)" href="../types/#agentlightning.Span">Span</a></code>
          –
          <div class="doc-md-description">
            <p>The stored span record (implementations may return a copy).</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement span persistence.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when the referenced rollout or attempt is missing.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.dequeue_rollout" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">dequeue_rollout</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.dequeue_rollout" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Claim the oldest queued rollout and transition it to <code>preparing</code>.</p>
<p>This function do not block.</p>
<p>Retrieval must be FIFO across rollouts that remain in <code>queuing</code> or <code>requeuing</code>
state. When a rollout is claimed, implementations must:</p>
<ul>
<li>Transition its status to <code>"preparing"</code>.</li>
<li>Create a new attempt with <code>status="preparing"</code> and <code>sequence_id</code> equal to
  the number of attempts already registered for the rollout plus one.</li>
<li>Return an <a class="autorefs autorefs-internal" title="            agentlightning.AttemptedRollout" href="../types/#agentlightning.AttemptedRollout"><code>AttemptedRollout</code></a> snapshot so the
  runner knows both rollout metadata and the attempt identifier.</li>
</ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.AttemptedRollout (agentlightning.types.AttemptedRollout)" href="../types/#agentlightning.AttemptedRollout">AttemptedRollout</a>]</code>
          –
          <div class="doc-md-description">
            <p>The next attempt to execute, or <code>None</code> when no eligible rollouts are queued.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement queue retrieval.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.enqueue_rollout" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">enqueue_rollout</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resources_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.enqueue_rollout" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Persist a rollout in <code>queuing</code> state so runners can claim it later.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Different from <a class="autorefs autorefs-internal" title="            start_rollout(input, mode=None, resources_id=None, config=None, metadata=None)

  
      async
  " href="#agentlightning.LightningStore.start_rollout"><code>start_rollout()</code></a>,
this method is called when the caller only wants to submit work for later scheduling.</p>
</div>
<p>Implementations must generate a unique <code>rollout_id</code>, stamp <code>start_time</code> with
the current time, default <code>config</code> to a fresh <a class="autorefs autorefs-internal" title="            agentlightning.RolloutConfig" href="../types/#agentlightning.RolloutConfig"><code>RolloutConfig</code></a>,
and insert the rollout at the tail of the scheduling queue. No attempt is created yet.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>input</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.TaskInput = Any

  
      module-attribute
   (agentlightning.types.TaskInput)" href="../internal/#agentlightning.TaskInput">TaskInput</a></code>)
          –
          <div class="doc-md-description">
            <p>Arbitrary task payload supplied by an algorithm.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>mode</code></b>
              (<code><span title="typing.Literal">Literal</span>[&#39;train&#39;, &#39;val&#39;, &#39;test&#39;] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Optional semantic mode indicator (<code>"train"</code>, <code>"val"</code>, <code>"test"</code>).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>resources_id</code></b>
              (<code><span title="str">str</span> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Resource snapshot used when a runner eventually executes the rollout.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>config</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.RolloutConfig (agentlightning.types.RolloutConfig)" href="../types/#agentlightning.RolloutConfig">RolloutConfig</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Fine-grained retry/timeout parameters to persist with the rollout.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>metadata</code></b>
              (<code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Free-form metadata stored verbatim with the rollout record.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            agentlightning.Rollout (agentlightning.types.Rollout)" href="../types/#agentlightning.Rollout">Rollout</a></code>
          –
          <div class="doc-md-description">
            <p>The stored <a class="autorefs autorefs-internal" title="            agentlightning.Rollout" href="../types/#agentlightning.Rollout"><code>Rollout</code></a> in <code>queuing</code> status.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must persist the rollout.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations should raise when <code>resources_id</code> does not exist.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.get_latest_attempt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_latest_attempt</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.get_latest_attempt" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Fetch the attempt with the highest <code>sequence_id</code> for <code>rollout_id</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Identifier to inspect.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.Attempt (agentlightning.types.Attempt)" href="../types/#agentlightning.Attempt">Attempt</a>]</code>
          –
          <div class="doc-md-description">
            <p>The most recent attempt or <code>None</code> when no attempts exist yet.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement retrieval.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when the rollout does not exist.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.get_latest_resources" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_latest_resources</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.get_latest_resources" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Fetch the latest resource snapshot marked as the global default.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate (agentlightning.types.ResourcesUpdate)" href="../types/#agentlightning.ResourcesUpdate">ResourcesUpdate</a>]</code>
          –
          <div class="doc-md-description">
            <p>The current latest <a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate" href="../types/#agentlightning.ResourcesUpdate"><code>ResourcesUpdate</code></a>, or <code>None</code> when</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate (agentlightning.types.ResourcesUpdate)" href="../types/#agentlightning.ResourcesUpdate">ResourcesUpdate</a>]</code>
          –
          <div class="doc-md-description">
            <p>no resources have been registered yet.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement retrieval.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.get_next_span_sequence_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_next_span_sequence_id</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">,</span> <span class="n">attempt_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.get_next_span_sequence_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Allocate the next strictly increasing sequence number used to order spans.</p>
<p>Implementations must retain counters so repeated calls return <code>1, 2, ...</code> without
gaps unless spans were explicitly inserted with a custom <code>sequence_id</code>. The
counter may be scoped per rollout or per attempt, but the sequence must be
strictly increasing for spans emitted by the specified attempt so traces remain
totally ordered.</p>
<p>See <a class="autorefs autorefs-internal" title="LLM Proxy" href="../../tutorials/traces/#distributed-tracing">Distributed Tracing</a> for detailed motivations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Identifier of the rollout emitting spans.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>attempt_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Attempt identifier for the upcoming span.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="int">int</span></code>
          –
          <div class="doc-md-description">
            <p>The next integer sequence identifier, unique within the attempt.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must provide the allocator.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when the rollout or attempt does not exist.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.get_resources_by_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_resources_by_id</span><span class="p">(</span><span class="n">resources_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.get_resources_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return a specific named resource snapshot by identifier.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>resources_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Identifier of the snapshot.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate (agentlightning.types.ResourcesUpdate)" href="../types/#agentlightning.ResourcesUpdate">ResourcesUpdate</a>]</code>
          –
          <div class="doc-md-description">
            <p>The stored <a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate" href="../types/#agentlightning.ResourcesUpdate"><code>ResourcesUpdate</code></a>, or <code>None</code> when missing.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement retrieval.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.get_rollout_by_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_rollout_by_id</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.get_rollout_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Fetch a rollout by identifier without mutating its state.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Identifier to retrieve.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.Rollout (agentlightning.types.Rollout)" href="../types/#agentlightning.Rollout">Rollout</a>]</code>
          –
          <div class="doc-md-description">
            <p>The rollout when found, otherwise <code>None</code>.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement retrieval.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.query_attempts" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">query_attempts</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.query_attempts" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return every attempt ever created for <code>rollout_id</code> in ascending sequence order.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Identifier of the rollout being inspected.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="            agentlightning.Attempt (agentlightning.types.Attempt)" href="../types/#agentlightning.Attempt">Attempt</a>]</code>
          –
          <div class="doc-md-description">
            <p>Attempts sorted by <code>sequence_id</code> (oldest first). Returns an empty list when none exist.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement the query.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when the rollout does not exist.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.query_rollouts" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">query_rollouts</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rollout_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.query_rollouts" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieve rollouts filtered by status and/or explicit identifiers.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>status</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="typing.Sequence">Sequence</span>[<a class="autorefs autorefs-internal" title="            agentlightning.RolloutStatus = Literal['queuing', 'preparing', 'running', 'failed', 'succeeded', 'cancelled', 'requeuing']

  
      module-attribute
   (agentlightning.types.RolloutStatus)" href="../types/#agentlightning.RolloutStatus">RolloutStatus</a>]]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Optional whitelist of <a class="autorefs autorefs-internal" title="            agentlightning.RolloutStatus = Literal['queuing', 'preparing', 'running', 'failed', 'succeeded', 'cancelled', 'requeuing']

  
      module-attribute
  " href="../types/#agentlightning.RolloutStatus"><code>RolloutStatus</code></a> values.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>rollout_ids</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="typing.Sequence">Sequence</span>[<span title="str">str</span>]]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Optional whitelist of rollout identifiers to include.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="            agentlightning.Rollout (agentlightning.types.Rollout)" href="../types/#agentlightning.Rollout">Rollout</a>]</code>
          –
          <div class="doc-md-description">
            <p>A list of matching rollouts. Ordering is backend-defined but must be deterministic.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement the query.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.query_spans" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">query_spans</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">,</span> <span class="n">attempt_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.query_spans" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the stored spans for a rollout, optionally scoped to one attempt.</p>
<p>Spans must be returned in ascending <code>sequence_id</code> order. Implementations may raise
a <code>RuntimeError</code> when spans were evicted or expired.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Identifier of the rollout being inspected.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>attempt_id</code></b>
              (<code><span title="str">str</span> | <span title="typing.Literal">Literal</span>[&#39;latest&#39;] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Attempt identifier to filter by. Pass <code>"latest"</code> to retrieve only the
most recent attempt, or <code>None</code> to return all spans across attempts.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="            agentlightning.Span (agentlightning.types.Span)" href="../types/#agentlightning.Span">Span</a>]</code>
          –
          <div class="doc-md-description">
            <p>An ordered list of spans (possibly empty).</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement the query.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when the rollout or attempt is unknown.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.start_attempt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">start_attempt</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.start_attempt" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a manual retry attempt for an existing rollout.</p>
<p>This is typically invoked by runners that wish to retry outside of the
normal queue flow (for example in an online RL setup).
Implementations must validate that the rollout exists, allocate a fresh <code>attempt_id</code>,
increment the <code>sequence_id</code> monotonically, stamp the new attempt with <code>status="preparing"</code>,
and return an up-to-date <a class="autorefs autorefs-internal" title="            agentlightning.AttemptedRollout" href="../types/#agentlightning.AttemptedRollout"><code>AttemptedRollout</code></a>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Unique identifier of the rollout receiving a new attempt.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            agentlightning.AttemptedRollout (agentlightning.types.AttemptedRollout)" href="../types/#agentlightning.AttemptedRollout">AttemptedRollout</a></code>
          –
          <div class="doc-md-description">
            <p>The rollout paired with its newly-created attempt.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement attempt creation.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when <code>rollout_id</code> is unknown.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.start_rollout" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">start_rollout</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resources_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.start_rollout" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Register a rollout and immediately create its first attempt.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use <a class="autorefs autorefs-internal" title="            enqueue_rollout(input, mode=None, resources_id=None, config=None, metadata=None)

  
      async
  " href="#agentlightning.LightningStore.enqueue_rollout"><code>enqueue_rollout()</code></a> when the
caller only wants to submit work for later scheduling.</p>
</div>
<p>The rollout must be persisted with <code>status="preparing"</code> and an initial attempt
with <code>sequence_id == 1</code> so the caller can begin execution without visiting the
public queue. Implementations are expected to:</p>
<ol>
<li>Generate a unique <code>rollout_id</code> and <code>attempt_id</code>.</li>
<li>Record <code>start_time</code> for both rollout and attempt based on the current clock.</li>
<li>Copy <code>config</code> and <code>metadata</code> so later mutations do not leak shared references.</li>
<li>Resolve <code>resources_id</code> to the latest resource snapshot when <code>None</code> is supplied.</li>
</ol>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>input</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.TaskInput = Any

  
      module-attribute
   (agentlightning.types.TaskInput)" href="../internal/#agentlightning.TaskInput">TaskInput</a></code>)
          –
          <div class="doc-md-description">
            <p>Arbitrary task payload supplied by an algorithm.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>mode</code></b>
              (<code><span title="typing.Literal">Literal</span>[&#39;train&#39;, &#39;val&#39;, &#39;test&#39;] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Optional semantic mode for downstream analytics (<code>"train"</code>, <code>"val"</code>, <code>"test"</code>).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>resources_id</code></b>
              (<code><span title="str">str</span> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Concrete resource snapshot to execute against; defaults to the latest stored snapshot.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>config</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.RolloutConfig (agentlightning.types.RolloutConfig)" href="../types/#agentlightning.RolloutConfig">RolloutConfig</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Rollout retry/timeout policy. Should default to a fresh <a class="autorefs autorefs-internal" title="            agentlightning.RolloutConfig" href="../types/#agentlightning.RolloutConfig"><code>RolloutConfig</code></a>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>metadata</code></b>
              (<code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Free-form metadata persisted verbatim with the rollout.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            agentlightning.AttemptedRollout (agentlightning.types.AttemptedRollout)" href="../types/#agentlightning.AttemptedRollout">AttemptedRollout</a></code>
          –
          <div class="doc-md-description">
            <p>The fully-populated <a class="autorefs autorefs-internal" title="            agentlightning.AttemptedRollout" href="../types/#agentlightning.AttemptedRollout"><code>AttemptedRollout</code></a> including</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            agentlightning.AttemptedRollout (agentlightning.types.AttemptedRollout)" href="../types/#agentlightning.AttemptedRollout">AttemptedRollout</a></code>
          –
          <div class="doc-md-description">
            <p>the just-created attempt.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must provide durable storage for the rollout.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations should raise when <code>resources_id</code> does not exist.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.update_attempt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">update_attempt</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">,</span> <span class="n">attempt_id</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">worker_id</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">last_heartbeat_time</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">UNSET</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.update_attempt" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Update attempt bookkeeping such as status, worker ownership, and heartbeats.</p>
<p>When <code>attempt_id</code> is <code>"latest"</code> the update must target the attempt with the highest
<code>sequence_id</code>; otherwise it must target the specific attempt. Implementations should
propagate status changes to the rollout (for example via <a class="autorefs autorefs-internal" title="            agentlightning.store.utils.propagate_status(update_rollout_status, attempt, config)

  
      async
  " href="../internal/#agentlightning.store.utils.propagate_status"><code>propagate_status()</code></a>)
once the latest attempt transitions to a terminal state.</p>
<p>Similar to <a class="autorefs autorefs-internal" title="            update_rollout(rollout_id, input=UNSET, mode=UNSET, resources_id=UNSET, status=UNSET, config=UNSET, metadata=UNSET)

  
      async
  " href="#agentlightning.LightningStore.update_rollout"><code>update_rollout()</code></a>,
parameters also default to the sentinel <a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
  " href="../internal/#agentlightning.store.base.UNSET"><code>UNSET</code></a>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Identifier of the rollout whose attempt will be updated.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>attempt_id</code></b>
              (<code><span title="str">str</span> | <span title="typing.Literal">Literal</span>[&#39;latest&#39;]</code>)
          –
          <div class="doc-md-description">
            <p>Attempt identifier or <code>"latest"</code> as a convenience.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>status</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.AttemptStatus = Literal['preparing', 'running', 'failed', 'succeeded', 'unresponsive', 'timeout']

  
      module-attribute
   (agentlightning.types.AttemptStatus)" href="../types/#agentlightning.AttemptStatus">AttemptStatus</a> | <span title="agentlightning.store.base.Unset">Unset</span></code>, default:
                  <code><a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
   (agentlightning.store.base.UNSET)" href="../internal/#agentlightning.store.base.UNSET">UNSET</a></code>
)
          –
          <div class="doc-md-description">
            <p>Replacement attempt status. Terminal statuses must set <code>end_time</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>worker_id</code></b>
              (<code><span title="str">str</span> | <span title="agentlightning.store.base.Unset">Unset</span></code>, default:
                  <code><a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
   (agentlightning.store.base.UNSET)" href="../internal/#agentlightning.store.base.UNSET">UNSET</a></code>
)
          –
          <div class="doc-md-description">
            <p>Identifier for the worker currently processing the attempt.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>last_heartbeat_time</code></b>
              (<code><span title="float">float</span> | <span title="agentlightning.store.base.Unset">Unset</span></code>, default:
                  <code><a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
   (agentlightning.store.base.UNSET)" href="../internal/#agentlightning.store.base.UNSET">UNSET</a></code>
)
          –
          <div class="doc-md-description">
            <p>Wall-clock timestamp (seconds) of the latest heartbeat/span.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>metadata</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]] | <span title="agentlightning.store.base.Unset">Unset</span></code>, default:
                  <code><a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
   (agentlightning.store.base.UNSET)" href="../internal/#agentlightning.store.base.UNSET">UNSET</a></code>
)
          –
          <div class="doc-md-description">
            <p>Replacement metadata dictionary.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            agentlightning.Attempt (agentlightning.types.Attempt)" href="../types/#agentlightning.Attempt">Attempt</a></code>
          –
          <div class="doc-md-description">
            <p>The updated attempt record.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement mutation logic.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when the rollout or attempt is unknown.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.update_resources" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">update_resources</span><span class="p">(</span><span class="n">resources_id</span><span class="p">,</span> <span class="n">resources</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.update_resources" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Overwrite or extend an existing resource snapshot and mark it as latest.</p>
<p>This API is typically used by algorithms that maintain mutable resources (e.g., model
checkpoints) under a stable identifier.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>resources_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Identifier of the snapshot to replace.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>resources</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.NamedResources = Dict[str, ResourceUnion]

  
      module-attribute
   (agentlightning.types.NamedResources)" href="../types/#agentlightning.NamedResources">NamedResources</a></code>)
          –
          <div class="doc-md-description">
            <p>Updated mapping of resource names to payloads.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate (agentlightning.types.ResourcesUpdate)" href="../types/#agentlightning.ResourcesUpdate">ResourcesUpdate</a></code>
          –
          <div class="doc-md-description">
            <p>The persisted <a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate" href="../types/#agentlightning.ResourcesUpdate"><code>ResourcesUpdate</code></a>.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement resource persistence.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when <code>resources_id</code> does not exist.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.update_rollout" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">update_rollout</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">resources_id</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">UNSET</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.update_rollout" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Update rollout metadata and, when provided, drive status transitions.</p>
<p>Parameters default to the sentinel <a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
  " href="../internal/#agentlightning.store.base.UNSET"><code>UNSET</code></a> to
distinguish omitted fields from explicit <code>None</code> assignments. Implementations must:</p>
<ul>
<li>Validate the rollout exists before mutating it.</li>
<li>Replace each property when a concrete value (including <code>None</code>) is supplied.</li>
<li>When the status switches into a terminal state, set <code>end_time</code> and signal any waiters.</li>
<li>When the status re-enters a queueing state, ensure the rollout is enqueued exactly once.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>Identifier of the rollout to update.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>input</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.TaskInput = Any

  
      module-attribute
   (agentlightning.types.TaskInput)" href="../internal/#agentlightning.TaskInput">TaskInput</a> | <span title="agentlightning.store.base.Unset">Unset</span></code>, default:
                  <code><a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
   (agentlightning.store.base.UNSET)" href="../internal/#agentlightning.store.base.UNSET">UNSET</a></code>
)
          –
          <div class="doc-md-description">
            <p>Replacement task payload; pass <code>None</code> to explicitly clear the input.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>mode</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;train&#39;, &#39;val&#39;, &#39;test&#39;]] | <span title="agentlightning.store.base.Unset">Unset</span></code>, default:
                  <code><a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
   (agentlightning.store.base.UNSET)" href="../internal/#agentlightning.store.base.UNSET">UNSET</a></code>
)
          –
          <div class="doc-md-description">
            <p>Replacement rollout mode.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>resources_id</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="str">str</span>] | <span title="agentlightning.store.base.Unset">Unset</span></code>, default:
                  <code><a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
   (agentlightning.store.base.UNSET)" href="../internal/#agentlightning.store.base.UNSET">UNSET</a></code>
)
          –
          <div class="doc-md-description">
            <p>Replacement resources snapshot reference.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>status</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.RolloutStatus = Literal['queuing', 'preparing', 'running', 'failed', 'succeeded', 'cancelled', 'requeuing']

  
      module-attribute
   (agentlightning.types.RolloutStatus)" href="../types/#agentlightning.RolloutStatus">RolloutStatus</a> | <span title="agentlightning.store.base.Unset">Unset</span></code>, default:
                  <code><a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
   (agentlightning.store.base.UNSET)" href="../internal/#agentlightning.store.base.UNSET">UNSET</a></code>
)
          –
          <div class="doc-md-description">
            <p>Target rollout status.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>config</code></b>
              (<code><a class="autorefs autorefs-internal" title="            agentlightning.RolloutConfig (agentlightning.types.RolloutConfig)" href="../types/#agentlightning.RolloutConfig">RolloutConfig</a> | <span title="agentlightning.store.base.Unset">Unset</span></code>, default:
                  <code><a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
   (agentlightning.store.base.UNSET)" href="../internal/#agentlightning.store.base.UNSET">UNSET</a></code>
)
          –
          <div class="doc-md-description">
            <p>Replacement retry/timeout configuration.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>metadata</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]] | <span title="agentlightning.store.base.Unset">Unset</span></code>, default:
                  <code><a class="autorefs autorefs-internal" title="            agentlightning.store.base.UNSET = _UnsetType()

  
      module-attribute
   (agentlightning.store.base.UNSET)" href="../internal/#agentlightning.store.base.UNSET">UNSET</a></code>
)
          –
          <div class="doc-md-description">
            <p>Replacement metadata dictionary.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            agentlightning.Rollout (agentlightning.types.Rollout)" href="../types/#agentlightning.Rollout">Rollout</a></code>
          –
          <div class="doc-md-description">
            <p>The updated rollout record.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement mutation logic.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when the rollout is unknown or the update is invalid.</p>
          </div>
        </li>
    </ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStore.wait_for_rollouts" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">wait_for_rollouts</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">rollout_ids</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStore.wait_for_rollouts" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Block until the targeted rollouts reach a terminal status or the timeout expires.</p>
<p>Terminal statuses are <code>"succeeded"</code>, <code>"failed"</code>, and <code>"cancelled"</code>. When the timeout
elapses, implementations should return the subset of rollouts that are already terminal
and omit the rest.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It's dangerous and might be event-loop blocking to call this function
with a long timeout. It's a good idea to poll for the method to check
if new completed rollouts can coming. Be careful in implementing the sleep logic
to avoid busy-waiting.</p>
</div>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_ids</code></b>
              (<code><span title="typing.List">List</span>[<span title="str">str</span>]</code>)
          –
          <div class="doc-md-description">
            <p>Identifiers of rollouts to watch.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>timeout</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Maximum time in seconds to wait. <code>None</code> waits indefinitely.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="            agentlightning.Rollout (agentlightning.types.Rollout)" href="../types/#agentlightning.Rollout">Rollout</a>]</code>
          –
          <div class="doc-md-description">
            <p>Rollouts that finished before the deadline, in arbitrary order.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="NotImplementedError">NotImplementedError</span></code>
            –
          <div class="doc-md-description">
            <p>Subclasses must implement waiting semantics.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="ValueError">ValueError</span></code>
            –
          <div class="doc-md-description">
            <p>Implementations must raise when a rollout identifier is unknown.</p>
          </div>
        </li>
    </ul>


    </div>

</div>



  </div>

    </div>

</div><h2 id="store-implementations">Store Implementations<a class="headerlink" href="#store-implementations" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h3 id="agentlightning.InMemoryLightningStore" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>agentlightning.InMemoryLightningStore</code>


<a href="#agentlightning.InMemoryLightningStore" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            agentlightning.LightningStore (agentlightning.store.base.LightningStore)" href="#agentlightning.LightningStore">LightningStore</a></code></p>


        <p>In-memory implementation of LightningStore using Python data structures.
Thread-safe and async-compatible but data is not persistent.</p>
<p>The methods in this class should generally not call each other,
especially those that are locked.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>eviction_memory_threshold</code></b>
              (<code><span title="float">float</span> | <span title="int">int</span> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The threshold for evicting spans in bytes.
By default, it's 70% of the total VRAM available.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>safe_memory_threshold</code></b>
              (<code><span title="float">float</span> | <span title="int">int</span> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The threshold for safe memory usage in bytes.
By default, it's 80% of the eviction threshold.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>span_size_estimator</code></b>
              (<code><span title="typing.Callable">Callable</span>[[<a class="autorefs autorefs-internal" title="            agentlightning.Span (agentlightning.types.Span)" href="../types/#agentlightning.Span">Span</a>], <span title="int">int</span>] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A function to estimate the size of a span in bytes.
By default, it's a simple size estimator that uses sys.getsizeof.</p>
          </div>
        </li>
    </ul>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.add_otel_span" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_otel_span</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">,</span> <span class="n">attempt_id</span><span class="p">,</span> <span class="n">readable_span</span><span class="p">,</span> <span class="n">sequence_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.add_otel_span" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Add an opentelemetry span to the store.</p>
<p>See <a class="autorefs autorefs-internal" title="            add_otel_span(rollout_id, attempt_id, readable_span, sequence_id=None)

  
      async
  " href="#agentlightning.LightningStore.add_otel_span"><code>LightningStore.add_otel_span()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.add_resources" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_resources</span><span class="p">(</span><span class="n">resources</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.add_resources" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Stores a new version of named resources and sets it as the latest.</p>
<p>See <a class="autorefs autorefs-internal" title="            add_resources(resources)

  
      async
  " href="#agentlightning.LightningStore.add_resources"><code>LightningStore.add_resources()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.add_span" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_span</span><span class="p">(</span><span class="n">span</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.add_span" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Persist a pre-converted span.</p>
<p>See <a class="autorefs autorefs-internal" title="            add_span(span)

  
      async
  " href="#agentlightning.LightningStore.add_span"><code>LightningStore.add_span()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.dequeue_rollout" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">dequeue_rollout</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.dequeue_rollout" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves the next task from the queue without blocking.
Returns <code>None</code> if the queue is empty.</p>
<p>Will set the rollout status to preparing and create a new attempt.</p>
<p>See <a class="autorefs autorefs-internal" title="            dequeue_rollout()

  
      async
  " href="#agentlightning.LightningStore.dequeue_rollout"><code>LightningStore.dequeue_rollout()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.enqueue_rollout" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">enqueue_rollout</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resources_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.enqueue_rollout" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Adds a new task to the queue with specific metadata and returns the rollout.</p>
<p>See <a class="autorefs autorefs-internal" title="            enqueue_rollout(input, mode=None, resources_id=None, config=None, metadata=None)

  
      async
  " href="#agentlightning.LightningStore.enqueue_rollout"><code>LightningStore.enqueue_rollout()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.get_latest_attempt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_latest_attempt</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.get_latest_attempt" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves the latest attempt for a given rollout ID.</p>
<p>See <a class="autorefs autorefs-internal" title="            get_latest_attempt(rollout_id)

  
      async
  " href="#agentlightning.LightningStore.get_latest_attempt"><code>LightningStore.get_latest_attempt()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.get_latest_resources" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_latest_resources</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.get_latest_resources" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves the latest version of named resources.</p>
<p>See <a class="autorefs autorefs-internal" title="            get_latest_resources()

  
      async
  " href="#agentlightning.LightningStore.get_latest_resources"><code>LightningStore.get_latest_resources()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.get_next_span_sequence_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_next_span_sequence_id</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">,</span> <span class="n">attempt_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.get_next_span_sequence_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the next span sequence ID for a given rollout and attempt.
The number is strictly increasing for each rollout.
The store will not issue the same sequence ID twice.</p>
<p>See <a class="autorefs autorefs-internal" title="            get_next_span_sequence_id(rollout_id, attempt_id)

  
      async
  " href="#agentlightning.LightningStore.get_next_span_sequence_id"><code>LightningStore.get_next_span_sequence_id()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.get_resources_by_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_resources_by_id</span><span class="p">(</span><span class="n">resources_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.get_resources_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves a specific version of named resources by its ID.</p>
<p>See <a class="autorefs autorefs-internal" title="            get_resources_by_id(resources_id)

  
      async
  " href="#agentlightning.LightningStore.get_resources_by_id"><code>LightningStore.get_resources_by_id()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.get_rollout_by_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_rollout_by_id</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.get_rollout_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves a specific rollout by its ID.</p>
<p>See <a class="autorefs autorefs-internal" title="            get_rollout_by_id(rollout_id)

  
      async
  " href="#agentlightning.LightningStore.get_rollout_by_id"><code>LightningStore.get_rollout_by_id()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.query_attempts" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">query_attempts</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.query_attempts" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves all attempts associated with a specific rollout ID.
Returns an empty list if no attempts are found.</p>
<p>See <a class="autorefs autorefs-internal" title="            query_attempts(rollout_id)

  
      async
  " href="#agentlightning.LightningStore.query_attempts"><code>LightningStore.query_attempts()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.query_rollouts" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">query_rollouts</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rollout_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.query_rollouts" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves rollouts filtered by their status and rollout ids.
If no status is provided, returns all rollouts.</p>
<p>See <a class="autorefs autorefs-internal" title="            query_rollouts(*, status=None, rollout_ids=None)

  
      async
  " href="#agentlightning.LightningStore.query_rollouts"><code>LightningStore.query_rollouts()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.query_spans" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">query_spans</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">,</span> <span class="n">attempt_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.query_spans" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Query and retrieve all spans associated with a specific rollout ID.
Returns an empty list if no spans are found.</p>
<p>See <a class="autorefs autorefs-internal" title="            query_spans(rollout_id, attempt_id=None)

  
      async
  " href="#agentlightning.LightningStore.query_spans"><code>LightningStore.query_spans()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.start_attempt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">start_attempt</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.start_attempt" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Creates a new attempt for a given rollout ID and return the attempt details.</p>
<p>See <a class="autorefs autorefs-internal" title="            start_attempt(rollout_id)

  
      async
  " href="#agentlightning.LightningStore.start_attempt"><code>LightningStore.start_attempt()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.start_rollout" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">start_rollout</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resources_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.start_rollout" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Notify the store that I'm about to run a rollout.</p>
<p>See <a class="autorefs autorefs-internal" title="            start_rollout(input, mode=None, resources_id=None, config=None, metadata=None)

  
      async
  " href="#agentlightning.LightningStore.start_rollout"><code>LightningStore.start_rollout()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.update_attempt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">update_attempt</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">,</span> <span class="n">attempt_id</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">worker_id</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">last_heartbeat_time</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">UNSET</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.update_attempt" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Update a specific or latest attempt for a given rollout.</p>
<p>See <a class="autorefs autorefs-internal" title="            update_attempt(rollout_id, attempt_id, status=UNSET, worker_id=UNSET, last_heartbeat_time=UNSET, metadata=UNSET)

  
      async
  " href="#agentlightning.LightningStore.update_attempt"><code>LightningStore.update_attempt()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.update_resources" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">update_resources</span><span class="p">(</span><span class="n">resources_id</span><span class="p">,</span> <span class="n">resources</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.update_resources" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Safely stores a new version of named resources and sets it as the latest.</p>
<p>See <a class="autorefs autorefs-internal" title="            update_resources(resources_id, resources)

  
      async
  " href="#agentlightning.LightningStore.update_resources"><code>LightningStore.update_resources()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.update_rollout" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">update_rollout</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">resources_id</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">UNSET</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">UNSET</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.update_rollout" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Update the rollout status and related metadata.</p>
<p>See <a class="autorefs autorefs-internal" title="            update_rollout(rollout_id, input=UNSET, mode=UNSET, resources_id=UNSET, status=UNSET, config=UNSET, metadata=UNSET)

  
      async
  " href="#agentlightning.LightningStore.update_rollout"><code>LightningStore.update_rollout()</code></a> for semantics.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.InMemoryLightningStore.wait_for_rollouts" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">wait_for_rollouts</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">rollout_ids</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.InMemoryLightningStore.wait_for_rollouts" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Wait for specified rollouts to complete with a timeout.
Returns the completed rollouts, potentially incomplete if timeout is reached.</p>
<p>This method does not change the state of the store.</p>
<p>See <a class="autorefs autorefs-internal" title="            wait_for_rollouts(*, rollout_ids, timeout=None)

  
      async
  " href="#agentlightning.LightningStore.wait_for_rollouts"><code>LightningStore.wait_for_rollouts()</code></a> for semantics.</p>


    </div>

</div>



  </div>

    </div>

</div><h2 id="client-server-and-thread-safe-wrappers">Client-Server and Thread-safe Wrappers<a class="headerlink" href="#client-server-and-thread-safe-wrappers" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h3 id="agentlightning.LightningStoreServer" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>agentlightning.LightningStoreServer</code>


<a href="#agentlightning.LightningStoreServer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            agentlightning.LightningStore (agentlightning.store.base.LightningStore)" href="#agentlightning.LightningStore">LightningStore</a></code></p>


        <p>Server wrapper that exposes a LightningStore via HTTP API.
Delegates all operations to an underlying store implementation.</p>
<p>Healthcheck and watchdog relies on the underlying store.</p>
<p><code>agl store</code> is a convenient CLI to start a store server.</p>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreServer.__getstate__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">__getstate__</span><span class="p">()</span></code>

<a href="#agentlightning.LightningStoreServer.__getstate__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Control pickling to prevent server state from being sent to subprocesses.</p>
<p>When LightningStoreServer is pickled (e.g., passed to a subprocess), we only
serialize the underlying store and connection details. The FastAPI app and
uvicorn server are excluded as they should not be transferred between processes.</p>
<p>The subprocess should create its own server instance if needed.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreServer.__setstate__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">__setstate__</span><span class="p">(</span><span class="n">state</span><span class="p">)</span></code>

<a href="#agentlightning.LightningStoreServer.__setstate__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Restore from pickle by reconstructing only the essential attributes.</p>
<p>Note: This creates a new server instance without FastAPI/uvicorn initialized.
Call <strong>init</strong>() pattern or create a new LightningStoreServer if you need
a fully functional server in the subprocess.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreServer.run_forever" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">run_forever</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStoreServer.run_forever" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Runs the FastAPI server indefinitely.</p>
<p>You need to call this method in the same process as the server was created in.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreServer.start" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">start</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStoreServer.start" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Starts the FastAPI server in the background.</p>
<p>You need to call this method in the same process as the server was created in.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreServer.stop" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStoreServer.stop" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Gracefully stops the running FastAPI server.</p>
<p>You need to call this method in the same process as the server was created in.</p>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentlightning.LightningStoreClient" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>agentlightning.LightningStoreClient</code>


<a href="#agentlightning.LightningStoreClient" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            agentlightning.LightningStore (agentlightning.store.base.LightningStore)" href="#agentlightning.LightningStore">LightningStore</a></code></p>


        <p>HTTP client that talks to a remote LightningStoreServer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>server_address</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>The address of the LightningStoreServer to connect to.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>retry_delays</code></b>
              (<code><span title="typing.Sequence">Sequence</span>[<span title="float">float</span>]</code>, default:
                  <code>(1.0, 2.0, 5.0)</code>
)
          –
          <div class="doc-md-description">
            <p>Backoff schedule (seconds) used when the initial request fails for a
non-application reason. Each entry is a retry attempt.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>health_retry_delays</code></b>
              (<code><span title="typing.Sequence">Sequence</span>[<span title="float">float</span>]</code>, default:
                  <code>(0.1, 0.2, 0.5)</code>
)
          –
          <div class="doc-md-description">
            <p>Delays between /health probes while waiting for the server to come back.</p>
          </div>
        </li>
    </ul>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreClient.__getstate__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">__getstate__</span><span class="p">()</span></code>

<a href="#agentlightning.LightningStoreClient.__getstate__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>When LightningStoreClient is pickled (e.g., passed to a subprocess), we only
serialize the server address and retry configurations. The ClientSessions
are excluded as they should not be transferred between processes.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreClient.__setstate__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">__setstate__</span><span class="p">(</span><span class="n">state</span><span class="p">)</span></code>

<a href="#agentlightning.LightningStoreClient.__setstate__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Restore from pickle by reconstructing only the essential attributes.</p>
<p>Replicating <code>__init__</code> logic to create another client instance in the subprocess.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreClient.close" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">close</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStoreClient.close" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Close the HTTP session.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreClient.dequeue_rollout" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">dequeue_rollout</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStoreClient.dequeue_rollout" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Dequeue a rollout from the server queue.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.AttemptedRollout (agentlightning.types.AttemptedRollout)" href="../types/#agentlightning.AttemptedRollout">AttemptedRollout</a>]</code>
          –
          <div class="doc-md-description">
            <p>AttemptedRollout if a rollout is available, None if queue is empty.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Note</summary>
  <p>This method does NOT retry on failures. If any exception occurs (network error,
server error, etc.), it logs the error and returns None immediately.</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreClient.get_latest_attempt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_latest_attempt</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStoreClient.get_latest_attempt" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the latest attempt for a rollout.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>ID of the rollout to query.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.Attempt (agentlightning.types.Attempt)" href="../types/#agentlightning.Attempt">Attempt</a>]</code>
          –
          <div class="doc-md-description">
            <p>Attempt if found, None if not found or if all retries are exhausted.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Note</summary>
  <p>This method retries on transient failures (network errors, 5xx status codes).
If all retries fail, it logs the error and returns None instead of raising an exception.</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreClient.get_latest_resources" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_latest_resources</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStoreClient.get_latest_resources" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the latest resources.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate (agentlightning.types.ResourcesUpdate)" href="../types/#agentlightning.ResourcesUpdate">ResourcesUpdate</a>]</code>
          –
          <div class="doc-md-description">
            <p>ResourcesUpdate if found, None if not found or if all retries are exhausted.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Note</summary>
  <p>This method retries on transient failures (network errors, 5xx status codes).
If all retries fail, it logs the error and returns None instead of raising an exception.</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreClient.get_resources_by_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_resources_by_id</span><span class="p">(</span><span class="n">resources_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStoreClient.get_resources_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get resources by their ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>resources_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>ID of the resources to retrieve.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.ResourcesUpdate (agentlightning.types.ResourcesUpdate)" href="../types/#agentlightning.ResourcesUpdate">ResourcesUpdate</a>]</code>
          –
          <div class="doc-md-description">
            <p>ResourcesUpdate if found, None if not found or if all retries are exhausted.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Note</summary>
  <p>This method retries on transient failures (network errors, 5xx status codes).
If all retries fail, it logs the error and returns None instead of raising an exception.</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreClient.get_rollout_by_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_rollout_by_id</span><span class="p">(</span><span class="n">rollout_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStoreClient.get_rollout_by_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get a rollout by its ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_id</code></b>
              (<code><span title="str">str</span></code>)
          –
          <div class="doc-md-description">
            <p>ID of the rollout to retrieve.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="            agentlightning.Rollout (agentlightning.types.Rollout)" href="../types/#agentlightning.Rollout">Rollout</a>]</code>
          –
          <div class="doc-md-description">
            <p>Rollout if found, None if not found or if all retries are exhausted.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Note</summary>
  <p>This method retries on transient failures (network errors, 5xx status codes).
If all retries fail, it logs the error and returns None instead of raising an exception.</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="agentlightning.LightningStoreClient.wait_for_rollouts" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">wait_for_rollouts</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">rollout_ids</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#agentlightning.LightningStoreClient.wait_for_rollouts" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Wait for rollouts to complete.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>rollout_ids</code></b>
              (<code><span title="typing.List">List</span>[<span title="str">str</span>]</code>)
          –
          <div class="doc-md-description">
            <p>List of rollout IDs to wait for.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>timeout</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="float">float</span>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Timeout in seconds. If not None, the method will raise a ValueError if the timeout is greater than 0.1 seconds.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="            agentlightning.Rollout (agentlightning.types.Rollout)" href="../types/#agentlightning.Rollout">Rollout</a>]</code>
          –
          <div class="doc-md-description">
            <p>List of rollouts that are completed.</p>
          </div>
        </li>
    </ul>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="agentlightning.LightningStoreThreaded" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>agentlightning.LightningStoreThreaded</code>


<a href="#agentlightning.LightningStoreThreaded" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            agentlightning.LightningStore (agentlightning.store.base.LightningStore)" href="#agentlightning.LightningStore">LightningStore</a></code></p>


        <p>Facade that delegates all store operations to a underlying store instance.</p>
<p>The operations are guaranteed to be thread-safe.
Make sure the threaded stores are instantiated before initializing the threads.</p>











  <div class="doc doc-children">












  </div>

    </div>

</div>

<!-- Was this page helpful? -->




<!-- Comment system -->

                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
  
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="https://unpkg.com/chart.js@4.5.1/dist/chart.umd.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
        <script src="../../javascripts/charts.js"></script>
      
        <script src="../../javascripts/move-source-file.js"></script>
      
        <script src="../../javascripts/katex.js"></script>
      
    
  <script>
    // Show warning banner if not viewing stable documentation
    document.addEventListener("DOMContentLoaded", function() {
      const currentURL = window.location.href;
      const warningDiv = document.getElementById("version-warning");

      // Check if we're on the stable docs or the redirect page
      if (currentURL.includes('agent-lightning/latest/')) {
        // Show warning for explicitly latest docs
        warningDiv.style.display = "block";
      }
    });
  </script>

  </body>
</html>